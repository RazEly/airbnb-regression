__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){switch(document.visibilityState){case'visible':return 1;case'hidden':return 2;case'prerender':return 3;default:return 4}}},"1140d4",[]);
__d(function(g,r,i,a,m,e,d){'use strict';Object.defineProperty(e,"__esModule",{value:!0});var n=e.PerformanceImageDownloadEvent={defaultProps:{schema:'com.airbnb.jitney.event.logging.Performance:PerformanceImageDownloadEvent:2.0.0',event_name:'performance_image_download'},propTypes:{}};n.fullyQualifiedName='Performance.v2.PerformanceImageDownloadEvent';e.PerformanceImageDownloadEventEvent=function(o){return{eventData:o,eventDataSchema:n}}},"1d88d8",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculatePagePerformanceScore=function(n){const c=p(n);return t.TTFCP.weight*c.ttfcp+t.TTLCP.weight*c.ttlcp+t.INP.weight*c.inp+t.TBT.weight*c.tbt+t.CLS.weight*c.cls};const t={TTFCP:{weight:.35,median:2500,podr:.08491351406,cap:4e3},TTLCP:{weight:.15,median:3e3,podr:244.5719961,cap:4e3},INP:{weight:.3,median:350,podr:.8735829252,cap:700},TBT:{weight:.15,median:1250,podr:167.2687485,cap:8e3},CLS:{weight:.05,median:.15,podr:1.889923697e-7,cap:.25}};function n(t){const n=t<0?-1:1,c=1/(1+.3275911*(t=Math.abs(t)));return n*(1-c*(.254829592+c*(c*(1.421413741+c*(1.061405429*c-1.453152027))-.284496736))*Math.exp(-t*t))}function c(t,c,p){const T=Math.log(t),o=Math.log(c/t),h=Math.sqrt(1-3*o-Math.sqrt((o-3)*(o-3)-8))/2;return(1-n((Math.log(p)-T)/(Math.SQRT2*h)))/2}function p({ttfcp:n,ttlcp:p,tbt:T,inp:o,cls:h}){return{ttfcp:c(t.TTFCP.median,t.TTFCP.podr,Math.min(n||0,t.TTFCP.cap)),ttlcp:c(t.TTLCP.median,t.TTLCP.podr,Math.min(p||0,t.TTLCP.cap)),inp:c(t.INP.median,t.INP.podr,Math.min(o||0,t.INP.cap)),tbt:c(t.TBT.median,t.TBT.podr,Math.min(T||0,t.TBT.cap)),cls:c(t.CLS.median,t.CLS.podr,Math.min(h||0,t.CLS.cap))}}},"27c072",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HYDRATE_PERFORMANCE_HOC_MARK=e.FMP_TARGET_ID=void 0;e.FMP_TARGET_ID='FMP-target',e.HYDRATE_PERFORMANCE_HOC_MARK='hydrate-performance-hoc'},"364f02",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDurationFromPerformanceElementEntry=function({pageCreatedAt:t,elementEntry:n}){const u=Math.round(n.renderTime-t);if(u<=0)return;return u},e.getDurationFromPerformanceMeasure=function({pageCreatedAt:t,performanceMeasure:n,isClientSideRequest:u}){let o;o=u&&!n.startTime?Math.round(n.duration-t):Math.round(n.duration);if(o<=0)return;return o}},"44fd48",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.cssRule=void 0,e.default=function({resources:t,universalPageName:l}){if(0===t.length||t.length>0&&void 0===t[0].decodedBodySize)return;const h=['link','img','css','script','other'],f=[u,{type:'img',initiatorList:['img','css','link'],regex:/^.+(muscache|localhost).+(jpg|jpeg|png|gif|webp)(\?.*)?$/},{type:'js',category:'airbnb',initiatorList:['link','script'],regex:/^.+(muscache|localhost).+\.m?(js|bundle)(\?.*)?$/},{type:'js',category:'third_party',initiatorList:['link','script'],regex:/^((?!(muscache|localhost)).)*\.m?js(\?.*)?$/},{type:'font',initiatorList:['link','css','other'],regex:/^.+(muscache|localhost).+\.woff2(\?.*)?$/}],y={css:{...c},js:{airbnb:{...c},third_party:{...c}},img:{...c},font:{...c}},_=[],p=s.default.getBootstrap('instrument_search_results_images');t.filter(({initiatorType:t})=>h.includes(t)).forEach(({duration:t,name:s,initiatorType:c,decodedBodySize:u,transferSize:h,encodedBodySize:b})=>{f.find(({type:f,initiatorList:j,regex:v,category:z})=>{if(j.includes(c)&&s.match(v)){const c=z?y[f][z]:y[f];if(p&&'img'===f&&2e3===l&&Math.random()<=n){const c=(0,o.createJitneyPropsForImageResource)({duration:t,encodedBodySize:b,name:s,transferSize:h});c&&_.push(c)}const j=c.count*c.cache_hit_ratio+(0===h?1:0);return c.count+=1,c.cache_hit_ratio=j?j/c.count:0,c.transfer_size+=h,c.encodedbody_size+=b,c.decodedbody_size+=u,!0}return!1})}),y.css=y.css?.count?y.css:void 0,y.js?.airbnb?.count?0===y.js?.third_party?.count&&(y.js.third_party.cache_hit_ratio=1):y.js=void 0;y.img=y.img?.count?y.img:void 0,y.font=y.font?.count?y.font:void 0,p&&_.length&&(0,o.sendJitneyEventsForImages)(_);if(!Object.values(y).find(t=>!!t))return;return y};var s=t(r(d[1])),o=r(d[2]);const c={transfer_size:0,encodedbody_size:0,decodedbody_size:0,count:0,cache_hit_ratio:0},n=.001,u=e.cssRule={type:'css',initiatorList:['link'],regex:/^.+(muscache|localhost).+\.css(\?.*)?$/}},"5ba13b",["ba7a76","c235f8","be6c80"]);
__d(function(g,r,i,a,m,_e,d){"use strict";var e=r(d[0]).default,t=r(d[1]).default;function s(){const e=r(d[2]);return s=function(){return e},e}function n(){const e=r(d[3]);return n=function(){return e},e}Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var o=r(d[4]),u=t(r(d[5])),c=r(d[6]),h=e(r(d[7])),p=t(r(d[8])),l=r(d[9]),P=t(r(d[10])),f=t(r(d[11])),v=r(d[12]),R=t(r(d[13]));function w(e){if(!e)return;return Object.keys(n().PageName).find(t=>n().PageName[t]===e)}function C(e){if(null==e)return null;return e.reduce((e,t)=>e.duration>t.duration?e:t,e[0])}const A=new class{constructor({isResetPageEventsEnabled:e,trackingModule:t}){this.trackingModule=void 0,this.performanceRecorders=[],this.lastPageName=void 0,this.ignorePathnameUpdate=void 0,this.includeHistoryUpdate=void 0,this.customMetricMapping=void 0,this.nextPageCreatedAt=void 0,this.resetPageEvents=void 0,this.pauseInfo={pauseStart:0,pauseDuration:0,pausePending:!1},this.currentPathname='',this.currentSearch='',this.setReadMetricsFromPerformanceRecorder=()=>{window.__readMetricsFromPerformanceRecorder=()=>this.performanceRecorders.map(e=>{if(!e.isRecorderLoggable)return;const t=w(e.universalPageName),s=w(e.subPageName),n=(0,P.default)({resources:e.recorderResults.resources,universalPageName:e.universalPageName}),o={...e.readCalculatedMetrics(),ttfcp:e.recorderResults.ttfcp,ttlcp:e.recorderResults.ttlcp,fid:e.recorderResults.fid,inp:e.recorderResults.inp,timeToFid:e.recorderResults.timeToFid,cls:e.recorderResults.cumulativeLayoutShift,lcp:e.recorderResults.lcp,createdAt:e.createdAt,pageRequestMethod:e.pageRequestMethod,navigationType:e.navigationType,cumulativeLayoutShiftEntries:e.recorderResults.cumulativeLayoutShiftEntries,inpInteractionEvents:e.recorderResults.inpInteractionEvents,assetSizes:n},u=(0,l.calculatePagePerformanceScore)(o);return{...o,pageName:t,subPageName:s,score:u}}).filter(e=>!!e),window.__ppsDebug=window.__ppsDebug||{},window.__ppsDebug.getInpEventTiming=()=>{const e=this.performanceRecorders[this.performanceRecorders.length-1];return e?C(e.recorderResults.inpInteractionEvents):null},window.__ppsDebug.getRCLTElementMap=()=>f.default.timings},this.updateCurrentRecorderWithHOCProps=e=>{const t=this.performanceRecorders[this.performanceRecorders.length-1];t&&(t.universalPageName=e.universalPageName,t.subPageName=e.subPageName,t.impressionUuid=e.impressionUuid,t.eventData=e.eventData,t.eventDataSchema=e.eventDataSchema,e.customMetricMapping&&(t.customMetricMapping=e.customMetricMapping,t.listenForCustomMetricsEntries()),t.isDirectRequest||t.setTtfcpClientFromTimestamp(e.timestampOfFCP))},this.handleNewHistory=e=>{e.listen(this.onHistoryChange)},this.setIgnorePathnameUpdate=e=>{this.ignorePathnameUpdate=e},this.clearIgnorePathnameUpdate=()=>{this.ignorePathnameUpdate=void 0},this.setIncludeHistoryUpdate=e=>{this.includeHistoryUpdate=e},this.clearIncludeHistoryUpdate=()=>{this.includeHistoryUpdate=void 0},this.setCustomMetricMapping=e=>{this.customMetricMapping=e},this.startNextPageTimer=()=>{this.nextPageCreatedAt=(0,h.default)().now(),this.pauseInfo.pausePending=!1,this.pauseInfo.pauseStart=0,this.pauseInfo.pauseDuration=0},this.pauseNextPageTimer=()=>{this.pauseInfo.pausePending=!0,this.pauseInfo.pauseStart=(0,h.default)().now()},this.resumeNextPageTimer=()=>{this.pauseInfo.pausePending?(this.pauseInfo.pausePending=!1,this.pauseInfo.pauseDuration+=(0,h.default)().now()-this.pauseInfo.pauseStart,this.pauseInfo.pauseStart=0):(0,o.airdogCount)('page_transition_coordinator.page_timer.error',1,['error:pause',`pathname:${window.location.pathname}`])},this.createNewRecorder=({isDirectRequest:e})=>{const t=this.performanceRecorders[this.performanceRecorders.length-1];t&&t.retire();const s=this.getNextPageCreatedAt();this.performanceRecorders.push(new p.default({isDirectRequest:e,pageCreatedAt:s}))},this.getNextPageCreatedAt=()=>{let e;return this.nextPageCreatedAt&&this.pauseInfo.pauseDuration?e=this.nextPageCreatedAt+this.pauseInfo.pauseDuration:this.pauseInfo.pausePending?((0,o.airdogCount)('page_transition_coordinator.page_timer.error',1,['error:resume',`pathname:${window.location.pathname}`]),e=this.nextPageCreatedAt):this.nextPageCreatedAt&&(e=this.nextPageCreatedAt),this.nextPageCreatedAt=void 0,e},this.onHistoryChange=(e,t)=>{const s=e.pathname,n=e.search;let o;switch(t){case'PUSH':case'REPLACE':o=2;break;case'POP':case'BACK_FORWARD_CACHE':o=1;break;default:o=5}this.isPageTransition({action:t,prevPathname:this.currentPathname,prevSearch:this.currentSearch,nextPathname:s,nextSearch:n})&&(this.flushAllEvents({triggeringAction:t}),'BACK_FORWARD_CACHE'===t?((0,h.default)().mark(h.SOFT_NAVIGATION_MARK,{detail:{navigationType:o,persisted:!0}}),this.createNewRecorder({isDirectRequest:!1})):((0,h.default)().mark(h.SOFT_NAVIGATION_MARK,{detail:{navigationType:o}}),this.createNewRecorder({isDirectRequest:!1}))),this.currentPathname=s,this.currentSearch=n},this.isPageTransition=e=>{const{action:t,prevPathname:s,nextPathname:n}=e;return'BACK_FORWARD_CACHE'===t||('function'==typeof this.includeHistoryUpdate?this.includeHistoryUpdate(e):!(!s||!n)&&(s!==n&&(('function'!=typeof this.ignorePathnameUpdate||!this.ignorePathnameUpdate({prevPathname:s,nextPathname:n,action:t}))&&(!('REPLACE'!==t||!(0,v.getPageRedirectShouldBeIgnored)({prevPathname:s,nextPathname:n}))||['POP','PUSH','REPLACE'].includes(t)))))},this.flushAllEvents=({triggeringAction:e}={})=>{(0,c.isBot)()||(this.performanceRecorders.forEach(t=>{if(t.retired||t.retire(),!t.isRecorderLoggable)return;t.isIntraPage=this.lastPageName===t.universalPageName,this.lastPageName=t.universalPageName;const{problems:n,warnings:u}=t.getDataProblems();'REPLACE'!==e||t.recorderResults.fid||u.push('probable-redirect');const c=[`pathname:${window.location.pathname}`,`pagename:${w(t.universalPageName)}`,`subpage_name:${w(t.subPageName)}`,`page_request_method:${t.pageRequestMethod}`];u.length>0&&(0,o.airdogCount)('page_transition_coordinator.data.warning',1,['error:data-warning',...c,...u.map(e=>`warning_${e}:true`)]),n.length>0?(0,o.airdogCount)('page_transition_coordinator.data.error',1,['error:data-problems',...c,...n.map(e=>`problem_${e}:true`)]):this.trackingModule?.queueJitneyEvent({schema:s().PerformanceWebPageMetricsEvent,event_data:(0,R.default)(t)})}),this.performanceRecorders=[],this.trackingModule?.getLogger().flushEventQueue())},this.setPageCloseHandlers=()=>{window.addEventListener('beforeunload',()=>this.flushAllEvents(),!0),window.addEventListener('visibilitychange',()=>{'hidden'===document.visibilityState&&this.flushAllEvents()}),window.addEventListener('pagehide',e=>{((0,c.isSafari)()||e.persisted)&&this.flushAllEvents()})},this.currentPathname=window.location.pathname,this.currentSearch=window.location.search,this.resetPageEvents=e??!0,this.createNewRecorder({isDirectRequest:!0}),this.trackingModule=t,this.setPageCloseHandlers(),this.listenForPageShow(),this.setReadMetricsFromPerformanceRecorder()}clearCustomMetricMapping(){this.customMetricMapping=void 0}listenForPageShow(){window.addEventListener('pageshow',e=>{e.persisted&&this.onHistoryChange(window.location,'BACK_FORWARD_CACHE')})}}({trackingModule:u.default});_e.default=A},"5c13fa",["45f788","ba7a76","58bb7c","1f7bea","3e4681","c8b97a","e9b7bf","5d602b","7fa87b","27c072","5ba13b","a8598b","7ed8b6","6614c9"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const n=c(t);return{assets:t.recorderResults.assets,page_request_method:t.pageRequestMethod,universal_page_name:t.universalPageName,subpage_name:t.subPageName,impression_uuid:t.impressionUuid,ttfcp:t.recorderResults.ttfcp,ttlcp:t.recorderResults.ttlcp??t.recorderResults.ttfcp,fid:t.recorderResults.fid,inp:t.recorderResults.inp,tbt:t.recorderResults.totalBlockingTime,interaction_hangs:t.recorderResults.interactionHangs,interaction_duration:t.recorderResults.interactionDuration,event_data:t.eventData,event_data_schema:t.eventDataSchema,domain_and_path:t.domainAndPath,network_information:t.networkInformation,web_performance_timing:t.recorderResults.webPerformanceTiming,tbt_pre_hydrate:t.recorderResults.tbtPreHydrate,tbt_post_hydrate:t.recorderResults.tbtPostHydrate,time_to_hydrate:t.recorderResults.timeToHydrate,recorder_duration:t.recorderResults.recorderDuration,time_to_fid:t.recorderResults.timeToFid,number_of_blocking_tasks:t.recorderResults.numberOfBlockingTasks,number_of_long_input_delays:t.recorderResults.numberOfLongInputDelays,total_duration_of_long_input_delays:t.recorderResults.totalDurationOfLongInputDelays,long_input_delays:t.recorderResults.longInputDelays,long_input_delay_counts:t.recorderResults.longInputDelayCounts,timed_interactions:t.recorderResults.timedInteractions,longest_blocking_time:t.recorderResults.longestBlockingTime,longest_blocking_task_index:t.recorderResults.longestBlockingTaskIndex,cumulative_layout_shift:t.recorderResults.cumulativeLayoutShift,lcp:t.recorderResults.lcp,long_animation_frames:t.recorderResults.longAnimationFrames?.map(t=>t.blockingDuration),...n,document_age:t.recorderResults.documentAge,inline_stylesheet_rules:t.recorderResults.inlineStylesheetRules,external_stylesheet_rules:t.recorderResults.externalStylesheetRules,is_dev:t.isDev,is_intra_page:t.isIntraPage,navigation_type:t.navigationType,metadata:u(t),rich_content_loading_times:t.recorderResults.rcltEntries,custom_metrics:t.recorderResults.customMetrics}},e.serializeNode=l;var n=t(r(d[1])),s=r(d[2]),o=r(d[3]);function l(t){if(!t)return;const{nodeName:n,parentElement:s}=t;let o,l;if(t.nodeType===Node.ELEMENT_NODE){const n=t;o=n.className,l=n.id}return JSON.stringify({nodeName:n,className:o,id:l,parentElement:s&&{nodeName:s.nodeName,className:s.className,id:s.id}})}function c(t){return{interactivity_spans:t.recorderResults.interactivitySpans.map(t=>({duration:t.duration,name:t.name,long_task_durations:t.longTaskDurations,number_of_blocking_tasks:t.numberOfBlockingTasks,tbt:t.totalBlockingTime,longest_blocking_time:t.longestBlockingTime})),interaction_categories:Object.entries(t.recorderResults.interactionCategories).reduce((t,[n,s])=>({...t,[n]:{tbt_per_second:s.totalBlockingTimePerSecond,number_of_blocking_tasks_per_second:s.numberOfBlockingTasksPerSecond,min_frame_drops_per_second:s.minFrameDropsPerSecond,count:s.count,duration:s.duration}}),{})}}function u(t){if(s.Flagger.isInitialized()&&'treatment'===s.Flagger.findTreatment((0,n.default)('web_performance_metadata_cleanup')))return{};const c=l(t.recorderResults.lcpTarget),u=l(t.recorderResults.ttlcpTarget),{alt:_,ttlcp:p}=t.recorderResults,{total_ram_mb:f,num_of_cores:R,is_low_data_mode:y,network_type:b}=t.recorderResults;return{...c&&{lcpTarget:c},...u&&{ttlcpTarget:u},...'number'==typeof _&&{alt:String(_)},cumulativeLayoutShiftEntries:JSON.stringify(t.recorderResults.cumulativeLayoutShiftEntries),...'number'==typeof p&&{ttlcpRaw:String(p)},react_upgrade:'',...t.recorderResults.inpContainingElement&&{inp_containing_element:t.recorderResults.inpContainingElement},...null!=t.recorderResults.softNavigationCount&&null!=t.recorderResults.unexpectedSoftNavigations&&{soft_navigation_count:String(t.recorderResults.softNavigationCount),unexpected_soft_navigations:JSON.stringify(t.recorderResults.unexpectedSoftNavigations)},render_blocking_css_duration_ms:t.recorderResults.resources.filter(t=>o.cssRule.initiatorList.includes(t.initiatorType)&&t.name.match(o.cssRule.regex)&&'blocking'===t.renderBlockingStatus).reduce((t,n)=>Math.max(t,n.duration??0),0).toFixed(2),...f&&{total_ram_mb:f},...R&&{num_of_cores:R},...y&&{is_low_data_mode:y},...b&&{network_type:b}}}},"6614c9",["ba7a76","4d3544","dcc72a","5ba13b"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getDocumentSize=function(){if(window.performance&&'function'==typeof window.performance.getEntriesByType){const[t]=performance.getEntriesByType('navigation');if(t)return{document_transfer_size_in_bytes:t.transferSize,document_encoded_body_size_in_bytes:t.encodedBodySize,document_decoded_body_size_in_bytes:t.decodedBodySize}}return{document_transfer_size_in_bytes:-1,document_encoded_body_size_in_bytes:-1,document_decoded_body_size_in_bytes:-1}},e.getNetworkInformation=function(){if(window.navigator&&window.navigator.connection){const{connection:t}=window.navigator;return{effective_type:t.effectiveType,rtt:t.rtt,downlink:t.downlink}}return},e.getWWWCdnProvider=function(){return{www_cdn_provider:n.default.get('wwwCdnProvider')||'Unknown'}},e.getWebPerformanceTiming=function(){if(window.performance&&'function'==typeof window.performance.getEntriesByType&&window.performance.getEntriesByType('navigation').length>=1){const t=window.performance.getEntriesByType('navigation'),[n]=t,{redirectStart:_,redirectEnd:c,fetchStart:s,domainLookupStart:u,domainLookupEnd:f,connectStart:p,connectEnd:w,secureConnectionStart:y,requestStart:v,responseStart:l,responseEnd:E,domInteractive:S,domContentLoadedEventStart:b,domContentLoadedEventEnd:z,domComplete:k,loadEventStart:B,loadEventEnd:T}=n;return{time_to_redirect_start_in_ms:o(_),time_to_redirect_end_in_ms:o(c),time_to_fetch_start_in_ms:o(s),time_to_domain_lookup_start_in_ms:o(u),time_to_domain_lookup_end_in_ms:o(f),time_to_connect_start_in_ms:o(p),time_to_connect_end_in_ms:o(w),time_to_secure_connection_start_in_ms:o(y),time_to_request_start_in_ms:o(v),time_to_response_start_in_ms:o(l),time_to_response_end_in_ms:o(E),time_to_dom_interactive_in_ms:o(S),time_to_dom_content_loaded_event_start_in_ms:o(b),time_to_dom_content_loaded_event_end_in_ms:o(z),time_to_dom_complete_in_ms:o(k),time_to_load_event_start_in_ms:o(B),time_to_load_event_end_in_ms:o(T)}}return{}};var n=t(r(d[1]));function o(t){return Math.round(t)}},"697349",["ba7a76","ef2bc3"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getPageRequestMethod=function(t){return s().then(t=>{if(!t)return!1;const s=g.window&&(0,o.default)();if(!s||!s.getEntriesByType)return!1;const c=s.getEntriesByType('navigation');if(!c||0===c.length)return n.default.get('isServiceWorkerAppShell');const l=c[0].serverTiming;if(!l||0===l.length)return!1;const v=l.filter(t=>'serviceWorker'===t.name);return v.length>0}).catch(()=>!1).then(n=>t?Promise.resolve(2):n?Promise.resolve(4):1===c?Promise.resolve(5):Promise.resolve(1))};var n=t(r(d[1])),o=t(r(d[2]));function s(){const{navigator:t}=window;return void 0===t?Promise.resolve(!1):'serviceWorker'in t&&t.serviceWorker.getRegistration?t.serviceWorker.getRegistration('/').then(t=>!(!t||!t.active)).catch(()=>!1):Promise.resolve(!1)}let c;!(function(){const t=g.window&&(0,o.default)();let n=3;if(t&&t.getEntriesByType){const o=t.getEntriesByType('navigation');if(o&&o.length>0){const t=o[0].serverTiming?.find(t=>'cdn-cache'===t.name);'HIT'===t?.description?n=1:'MISS'!==t?.description&&'NO-STORE'!==t?.description||(n=2)}}c=n})()},"6f10f0",["ba7a76","ef2bc3","5d602b"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPageRedirectShouldBeIgnored=function({prevPathname:t,nextPathname:o,__test_redirectPathnamesToIgnore:s}){return(s||n).some(n=>n.ignorePrevPathname===t&&n.ignoreNextPathname===o)};const n=[{ignorePrevPathname:'/guest/inbox',ignoreNextPathname:'/guest/messages',pocEmail:'riley.glusker@airbnb.com'},{ignorePrevPathname:'/hosting/inbox',ignoreNextPathname:'/hosting/messages',pocEmail:'riley.glusker@airbnb.com'}]},"7ed8b6",[]);
__d(function(g,r,_i,_a,m,_e,d){"use strict";var e=r(d[0]).default,t=r(d[1]).default;Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var s=t(r(d[2])),i=r(d[3]),o=r(d[4]),n=r(d[5]),a=e(r(d[6])),c=r(d[7]),l=r(d[8]),h=r(d[9]),u=r(d[10]),p=r(d[11]),v=r(d[12]),f=r(d[13]),b=r(d[14]),R=r(d[15]),y=t(r(d[16])),T=t(r(d[17])),O=r(d[18]),L=r(d[19]);const F='CSR_PAGE_START',S=new Set(['click','input','keypress']),k=[l.InteractivitySpanName.MOWEB_MAP_USER_INTERACTION,l.InteractivitySpanName.DESKTOP_MAP_USER_INTERACTION,l.InteractivitySpanName.SCROLL];class C{constructor({isDirectRequest:e,pageCreatedAt:t}){this.isRecorderLoggable=!0,this.isIntraPage=void 0,this.networkInformation=(0,h.getNetworkInformation)(),this.initialVisibilityState=(0,T.default)(),this.isDirectRequest=void 0,this.isClientSideRequest=void 0,this.performance=(0,a.default)(),this.createdAt=void 0,this.pageRequestMethod=1,this.domainAndPath=`${window.location.host}${window.location.pathname}`,this.recorderController=void 0,this.recorderResults={assets:{},cumulativeLayoutShiftEntries:[],interactionCategories:{},interactivitySpans:[],longInputDelayCounts:[],longInputDelays:[],longTasks:[],numberOfLongInputDelays:0,resources:[],timedInteractions:[],totalDurationOfLongInputDelays:0,total_ram_mb:(0,i.getTotalRamMb)(),num_of_cores:(0,i.getNumOfCores)(),is_low_data_mode:(0,i.getIsLowDataMode)(),network_type:(0,i.getNetworkType)(),rcltEntries:[],customMetrics:{}},this.paintObserver=void 0,this.longTaskObserver=void 0,this.inputDelayObserver=void 0,this.timedInteractionObserver=void 0,this.resourcesObserver=void 0,this.clsObserver=void 0,this.lcpObserver=void 0,this.longAnimationFrameObserver=void 0,this.softNavigationsObserver=void 0,this.customMetricObserver=void 0,this.customMetricMapping=void 0,this.retired=!1,this.isDev=!1,this.universalPageName=void 0,this.subPageName=void 0,this.impressionUuid=void 0,this.eventData=void 0,this.eventDataSchema=void 0,this.navigationType=void 0,this.showLogs=(0,o.getTreatmentOverride)('pps'),this.retire=async()=>{this.retired||(this.retired=!0,void 0===this.recorderResults.ttfcp&&(this.isRecorderLoggable=!1),this.cleanUpLongTasks(),this.cleanupLongInputDelayObserver(),this.cleanupTimedInteractionObserver(),this.cleanUpResources(),this.cleanUpClsObserver(),this.cleanUpPaintObserver(),this.cleanUpLCPObserver(),this.cleanupScrollHangs(),this.cleanupLongAnimationFrameObserver(),this.cleanupSoftNavigationsObserver(),this.cleanupRCLT(),this.cleanUpCustomMetricsObserver(),this.measureCustomMetricsPerformanceMarks(),this.recordStylesheetRuleLength(),this.recorderResults.recorderDuration=this.performance.now()-this.createdAt,this.recorderResults.timeToHydrate=this.calculateTimeToHydrate(),this.hasNecessaryPolyfills()&&window.perfMetrics.stopSearchingForLargestContentfulPaint?.(),this.recorderController?.abort(),this.recorderController=void 0)},this.getDataProblems=()=>{const{ttfcp:e}=this.recorderResults,t=[];return e&&e<0&&t.push('ttfcp-negative'),e&&e>6e4&&!this.isDev&&t.push('ttfcp-exceeds-60s'),{problems:t,warnings:[]}},this.readCalculatedMetrics=()=>{const e=this.calculateTimeToHydrate();return{tbt:(0,L.calculateTotalBlockingTime)(this.recorderResults),tbtPreHydrate:(0,L.calculateTbtPreHydrate)(this.recorderResults,e),tbtPostHydrate:(0,L.calculateTbtPostHydrate)(this.recorderResults,e),timeToHydrate:e,numberOfBlockingTasks:(0,L.calculateNumberOfBlockingTasks)(this.recorderResults),longestBlockingTime:(0,L.calculateLongestBlockingTaskIndex)(this.recorderResults),longestBlockingTaskIndex:(0,L.calculateLongestBlockingTaskIndex)(this.recorderResults),...(0,u.isALTEnabled)()&&{alt:(0,u.calculateAdditionalLoadTime)(this.recorderResults.resources,this.recorderResults.ttfcp)},loaf:this.recorderResults.longAnimationFrames&&(0,R.processLongAnimationFramesForDiagnostics)(this.recorderResults.longAnimationFrames).cumulativeBlockingTime}},this.gatherMetrics=()=>{this.isDirectRequest&&this.observeFCP(),this.listenForLCP(),this.listenForLongTasks(),this.listenForCLS(),this.listenForResources(),this.listenForLongInputDelays(),this.listenForTimedInteractions(),this.listenForScrollHangs(),(0,R.isLoafSupported)()&&this.listenForLongAnimationFrames(),(0,O.isRCLTSupported)()&&this.listenForRCLT(),this.recorderResults.webPerformanceTiming={...(0,h.getWWWCdnProvider)(),...this.isDirectRequest&&(0,h.getWebPerformanceTiming)(),...this.isDirectRequest&&(0,h.getDocumentSize)()},this.listenForSoftNavigations()},this.gatherPolyfilledMetrics=()=>{this.listenForFID(),this.listenForINP();const e=(0,a.getLastSoftNavigation)();if(e?.detail?.persisted){const e=this.performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.recorderResults.ttlcp=this.performance.now()-e})})}else this.listenForTTLCP()},this.observeFCP=()=>{if(!this.isClientSideRequest&&this.supportsPerformanceObserverWithType('paint'))try{this.paintObserver=new PerformanceObserver(e=>{e.getEntries().forEach(this.setTtfcpDirectFromEntry)}),this.paintObserver.observe({type:'paint',buffered:!0}),(0,n.isWebSafari)()&&this.performance.getEntriesByType('paint').forEach(this.setTtfcpDirectFromEntry)}catch(e){}},this.setTtfcpDirectFromEntry=e=>{'first-contentful-paint'===e.name&&(this.setTtfcpClientFromTimestamp(e.startTime),this.showLogs&&this.consoleLogMetrics())},this.cleanUpPaintObserver=()=>{this.paintObserver&&('function'==typeof this.paintObserver.takeRecords&&this.paintObserver.takeRecords().forEach(this.setTtfcpDirectFromEntry),this.paintObserver.disconnect())},this.setTtfcpClientFromTimestamp=e=>{this.retired||this.recorderResults.ttfcp||(this.recorderResults.ttfcp=e-this.createdAt,this.isClientSideRequest&&(this.performance.mark('TTFCP_END'),this.performance.measure('TTFCP',F,'TTFCP_END')),this.showLogs&&this.consoleLogMetrics())},this.listenForTTLCP=()=>{this.retired||(this.isClientSideRequest?window.perfMetrics.startSearchingForLargestContentfulPaint?.():(window.perfMetrics.stopPollingForLargestContentfulPaint?.(),window.perfMetrics.markIsHydratedForLargestContentfulPaint?.()),window.perfMetrics.onLargestContentfulPaint?.(this.setTTLCP))},this.setTTLCP=(e,t)=>{if(this.retired)return;const s=Math.max(0,e-this.createdAt);this.recorderResults.ttlcp=s,this.recorderResults.ttlcpTarget=t,this.isClientSideRequest&&(this.performance.clearMeasures('TTLCP-candidate'),this.performance.measure('TTLCP-candidate',{start:'CSR_PAGE_START',duration:s})),this.showLogs&&this.consoleLogMetrics()},this.listenForFID=()=>{window.perfMetrics.clearFirstInputDelay(),window.perfMetrics.onFirstInputDelay(this.setFID)},this.setFID=(e,t)=>{if(this.retired)return;this.recorderResults.fid=e;const s=t.timeStamp-this.createdAt;s>=0&&(this.recorderResults.timeToFid=s),this.showLogs&&this.consoleLogMetrics()},this.listenForINP=()=>{window.perfMetrics.clearInp?.(),window.perfMetrics.onInp?.(this.setINP)},this.setINP=(e,t)=>{this.retired||(this.recorderResults.inp=e,this.recorderResults.inpInteractionEvents=t,this.recorderResults.inpContainingElement=(0,v.getInpContainingElement)(t),this.showLogs&&this.consoleLogMetrics())},this.listenForTimedInteractions=()=>{if(this.supportsPerformanceObserverWithType('element')){this.cleanupTimedInteractionObserver(),this.timedInteractionObserver=new PerformanceObserver(e=>{C.lastInputDelayEvent&&(e.getEntries().forEach(e=>{this.recordTimedInteraction(e)}),C.lastInputDelayEvent=void 0)});try{this.timedInteractionObserver.observe({type:'element',buffered:this.isDirectRequest})}catch{}}},this.recordTimedInteraction=e=>{const t=C.lastInputDelayEvent;if(!t)return;const{element:s,identifier:i,name:o,renderTime:n}=e,a={element_type:'image-paint'===o?'image':'text',identifier_type:i,previous_target_ancestor_section_id:t.target_ancestor_section_id,start_time:t.start_time,target_ancestor_section_id:this.findAncestorSectionId(s),total_time:Math.round(n-t.start_time)};this.recorderResults.timedInteractions.push(a)},this.cleanupTimedInteractionObserver=()=>{if(!this.timedInteractionObserver)return;'function'==typeof this.timedInteractionObserver.takeRecords&&this.timedInteractionObserver.takeRecords();const{timedInteractions:e}=this.recorderResults;this.recorderResults.timedInteractions=e.slice(0,20),this.timedInteractionObserver.disconnect()},this.listenForLongInputDelays=()=>{if(this.supportsPerformanceObserverWithType('event')){this.inputDelayObserver=new PerformanceObserver(e=>{let t;e.getEntries().forEach(e=>{this.recordLongInputDelay(e),S.has(e.name)&&(t=e)}),t&&(C.lastInputDelayEvent=this.createLongInputRecord(t))});try{this.inputDelayObserver.observe({type:'event',buffered:this.isDirectRequest})}catch{}}},this.createLongInputRecord=e=>{const{duration:t,name:s,processingEnd:i,processingStart:o,startTime:n,target:a}=e,c=o-n;return{input_delay:Math.round(c),input_duration:t,event_type:s,start_time:Math.round(n),target_ancestor_section_id:this.findAncestorSectionId(a),total_time:Math.round(i-n)}},this.recordLongInputDelay=e=>{const{name:t,processingStart:s,startTime:i}=e;if(!S.has(t))return;if(s-i<100)return;const o=this.createLongInputRecord(e);this.recorderResults.longInputDelays.push(o)},this.cleanupLongInputDelayObserver=()=>{if(!this.inputDelayObserver)return;'function'==typeof this.inputDelayObserver.takeRecords&&this.inputDelayObserver.takeRecords();let e=0;const t=new Map;this.recorderResults.longInputDelays.forEach(({event_type:s,total_time:i})=>{e+=i;let o=t.get(s);o||(o={event_count:0,total_duration:0,event_name:s},t.set(s,o)),o.event_count+=1,o.total_duration+=i}),this.recorderResults.longInputDelayCounts=Array.from(t.values()),this.recorderResults.numberOfLongInputDelays=this.recorderResults.longInputDelays.length,this.recorderResults.totalDurationOfLongInputDelays=e,this.recorderResults.longInputDelays=this.recorderResults.longInputDelays.sort((e,t)=>t.total_time-e.total_time).slice(0,20),this.inputDelayObserver.disconnect()},this.listenForLongTasks=()=>{if(this.supportsPerformanceObserverWithType('longtask'))try{this.longTaskObserver=new PerformanceObserver(e=>{this.recorderResults.longTasks.push(...e.getEntries())}),this.longTaskObserver.observe({type:'longtask',buffered:this.isDirectRequest})}catch(e){}},this.cleanUpLongTasks=()=>{this.longTaskObserver&&('function'==typeof this.longTaskObserver.takeRecords&&this.recorderResults.longTasks.push(...this.longTaskObserver.takeRecords()),this.recorderResults.totalBlockingTime=(0,L.calculateTotalBlockingTime)(this.recorderResults),this.showLogs&&this.consoleLogMetrics(),this.recorderResults.longestBlockingTime=(0,L.calculateLongestBlockingTime)(this.recorderResults),this.recorderResults.longestBlockingTaskIndex=(0,L.calculateLongestBlockingTaskIndex)(this.recorderResults),this.recorderResults.tbtPreHydrate=(0,L.calculateTbtPreHydrate)(this.recorderResults,this.calculateTimeToHydrate()),this.recorderResults.tbtPostHydrate=(0,L.calculateTbtPostHydrate)(this.recorderResults,this.calculateTimeToHydrate()),this.recorderResults.numberOfBlockingTasks=(0,L.calculateNumberOfBlockingTasks)(this.recorderResults),this.recorderResults.interactivitySpans=(0,l.getInteractivitySpans)({start:this.createdAt,end:this.performance.now()}).map(e=>({name:e.name,duration:e.end-e.start,...(0,L.calculateInteractivityMetricsInInterval)(this.recorderResults,e)})),this.recorderResults.interactionCategories=(0,l.aggregateInteractivitySpans)(this.recorderResults.interactivitySpans),this.longTaskObserver.disconnect())},this.calculateTimeToHydrate=()=>{const e=[...this.performance.getEntriesByName(c.HYDRATE_PERFORMANCE_HOC_MARK)].filter(e=>e.startTime>this.createdAt);if(0===e.length)return;return e.reduce((e,t)=>e.startTime<t.startTime?e:t,e[0]).startTime-this.createdAt},this.listenForCLS=()=>{if(this.supportsPerformanceObserverWithType('layout-shift'))try{this.clsObserver=new PerformanceObserver(this.clsObserverCallback),this.recorderResults.cumulativeLayoutShift=0,this.clsObserver.observe({type:'layout-shift',buffered:this.isDirectRequest})}catch(e){}},this.clsObserverCallback=e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(this.recorderResults.cumulativeLayoutShift=this.recorderResults.cumulativeLayoutShift||0,this.recorderResults.cumulativeLayoutShift+=e.value||0,this.recorderResults.cumulativeLayoutShiftEntries.push((0,b.getLayoutShfitDebugEntry)(e)),this.recorderResults.cumulativeLayoutShiftEntries.length>3&&this.recorderResults.cumulativeLayoutShiftEntries.sort((e,t)=>e.value-t.value).slice(2),this.showLogs&&this.consoleLogMetrics())})},this.cleanUpClsObserver=()=>{this.clsObserver&&('function'==typeof this.clsObserver.takeRecords&&this.clsObserver.takeRecords(),this.clsObserver.disconnect())},this.scrollEndTimeout=void 0,this.documentScrollEventListener=()=>{this.scrollEndTimeout||(0,l.beginInteractivitySpan)(l.InteractivitySpanName.SCROLL),window.clearTimeout(this.scrollEndTimeout),this.scrollEndTimeout=setTimeout(()=>{this.scrollEndTimeout=void 0,(0,l.endInteractivitySpan)(l.InteractivitySpanName.SCROLL)},50)},this.listenForScrollHangs=()=>{window.addEventListener('scroll',this.documentScrollEventListener,{passive:!0})},this.listenForLongAnimationFrames=()=>{if((0,R.isLoafSupported)())try{this.longAnimationFrameObserver=new PerformanceObserver(e=>{const t=e.getEntries();if(this.recorderResults.longAnimationFrames||(this.recorderResults.longAnimationFrames=[]),this.recorderResults.longAnimationFrames=(0,R.limitFrames)([...this.recorderResults.longAnimationFrames,...t]),this.showLogs){const e=(0,R.processLongAnimationFramesForDiagnostics)(this.recorderResults.longAnimationFrames);this.recorderResults.longAnimationFrameData=e,this.recorderResults.cumulativeLoafBlockingTime=e.cumulativeBlockingTime,this.consoleLogMetrics()}}),this.longAnimationFrameObserver.observe({type:'long-animation-frame',buffered:this.isDirectRequest})}catch(e){}},this.cleanupLongAnimationFrameObserver=()=>{if(this.longAnimationFrameObserver){if('function'==typeof this.longAnimationFrameObserver.takeRecords){const e=this.longAnimationFrameObserver.takeRecords();e.length>0&&(this.recorderResults.longAnimationFrames||(this.recorderResults.longAnimationFrames=[]),this.recorderResults.longAnimationFrames=(0,R.limitFrames)([...this.recorderResults.longAnimationFrames,...e]))}if(this.showLogs&&this.recorderResults.longAnimationFrames?.length){const e=(0,R.processLongAnimationFramesForDiagnostics)(this.recorderResults.longAnimationFrames);this.recorderResults.longAnimationFrameData=e,this.recorderResults.cumulativeLoafBlockingTime=e.cumulativeBlockingTime,this.consoleLogMetrics()}this.longAnimationFrameObserver.disconnect()}},this.cleanupScrollHangs=()=>{window.removeEventListener('scroll',this.documentScrollEventListener,!1);const e=this.recorderResults.interactivitySpans.filter(e=>k.includes(e.name));this.recorderResults.interactionDuration=e.reduce((e,t)=>e+t.duration,0),this.recorderResults.interactionHangs=e.reduce((e,t)=>e+t.totalBlockingTime,0),this.showLogs&&this.consoleLogMetrics()},this.rcltObserver=null,this.listenForResources=()=>{if(this.supportsPerformanceObserverWithType('resource'))try{this.resourcesObserver=new PerformanceObserver(e=>{this.recorderResults.resources.push(...e.getEntries())}),this.resourcesObserver.observe({type:'resource',buffered:this.isDirectRequest})}catch(e){}},this.cleanUpResources=()=>{this.resourcesObserver&&('function'==typeof this.resourcesObserver.takeRecords&&this.recorderResults.resources.push(...this.resourcesObserver.takeRecords()),this.recorderResults.assets=(0,y.default)({resources:this.recorderResults.resources,universalPageName:this.universalPageName}),(0,u.isALTEnabled)()&&(this.recorderResults.alt=(0,u.calculateAdditionalLoadTime)(this.recorderResults.resources,this.recorderResults.ttfcp),(0,u.measureAdditionalLoadTime)(this.recorderResults.resources,this.recorderResults.ttfcp)),this.resourcesObserver.disconnect())},this.recordStylesheetRuleLength=()=>{let e=0,t=0;if(document.styleSheets){for(let s=0;s<document.styleSheets.length;s++)try{document.styleSheets[s].href?t+=document.styleSheets[s].rules.length:e+=document.styleSheets[s].rules.length}catch(e){}this.recorderResults.inlineStylesheetRules=e,this.recorderResults.externalStylesheetRules=t}},this.listenForLCP=()=>{if(!this.isClientSideRequest&&this.supportsPerformanceObserverWithType('largest-contentful-paint'))try{this.lcpObserver=new PerformanceObserver(e=>{e.getEntries().forEach(this.updateLCP)}),this.lcpObserver.observe({type:'largest-contentful-paint',buffered:!0})}catch(e){}},this.updateLCP=e=>{this.recorderResults.lcp=e.startTime,this.recorderResults.lcpTarget=e.element},this.cleanUpLCPObserver=()=>{this.lcpObserver&&('function'==typeof this.lcpObserver.takeRecords&&this.lcpObserver.takeRecords().forEach(this.updateLCP),this.lcpObserver.disconnect())},this.listenForSoftNavigations=()=>{if(this.supportsPerformanceObserverWithType('soft-navigation')){this.cleanupSoftNavigationsObserver(),this.softNavigationsObserver=new PerformanceObserver(this.softNavigationsObserverCallback),this.recorderResults.softNavigationCount=0,this.recorderResults.unexpectedSoftNavigations=[];try{this.softNavigationsObserver.observe({type:'soft-navigation',buffered:this.isDirectRequest})}catch{}}},this.softNavigationsObserverCallback=e=>{for(const t of e.getEntries()){this.recorderResults.softNavigationCount??=0;this.isClientSideRequest&&0===this.recorderResults.softNavigationCount||(this.recorderResults.unexpectedSoftNavigations??=[],this.recorderResults.unexpectedSoftNavigations.push(t.name)),this.recorderResults.softNavigationCount+=1}},this.cleanupSoftNavigationsObserver=()=>{this.softNavigationsObserver&&('function'==typeof this.softNavigationsObserver.takeRecords&&this.softNavigationsObserver.takeRecords(),this.softNavigationsObserver.disconnect())},this.supportsPerformanceObserverWithType=e=>'undefined'!=typeof PerformanceObserver&&(!!PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(e)),this.findAncestorSectionId=e=>{let t=null,s=e;for(;null===t&&s;)t=s.getAttribute('data-section-id')||s.getAttribute('data-testid'),s=s.parentElement;return t||void 0},this.hasNecessaryPolyfills=()=>!!window.perfMetrics,this.consoleLogMetrics=()=>{const{alt:e,cumulativeLayoutShift:t,cumulativeLoafBlockingTime:s,fid:i,inp:o,interactionDuration:n,interactionHangs:a,lcp:c,longAnimationFrameData:l,longAnimationFrames:h,totalBlockingTime:u,ttfcp:p,ttlcp:v,rcltEntries:f}=this.recorderResults;if(!l&&h?.length){const e=(0,R.processLongAnimationFramesForDiagnostics)(h);this.recorderResults.longAnimationFrameData=e,this.recorderResults.cumulativeLoafBlockingTime=e.cumulativeBlockingTime}const b=this.recorderResults.longAnimationFrameData?`Frames: ${this.recorderResults.longAnimationFrameData.longFrameCount}, Cumulative LoAF Blocking Time: ${Math.round(this.recorderResults.longAnimationFrameData.cumulativeBlockingTime)}ms (TBT replacement candidate)`:'No frame data available',y=h?.length?(0,R.analyzeScriptSources)(h):[],T=y.slice(0,3).map((e,t)=>`${t+1}. ${e.sourceURL||'unknown'} (${e.count} scripts, ${Math.round(e.totalDuration)}ms)`).join('\n    '),O=y.length>0?`\n  Top Script Sources:\n    ${T}`:'',L=f&&f.length>0&&f.reduce((e,t)=>e+Number(t.duration),0)/f.length||void 0;console.log(`Page Performance Score metrics (air.bb/web-pps)\n\nPathname = %c${window.location.pathname}%c\n  Time To First Contentful Paint   = ${this.prettyMetric({metric:p})}\n  Time To Largest Contentful Paint = ${this.prettyMetric({metric:v})}\n  First Input Delay                = ${this.prettyMetric({metric:i,isFid:!0})}\n  Total Blocking Time              = ${this.prettyMetric({metric:u,isTbt:!0})}\n  Cumulative Layout Shift          = ${this.prettyMetric({metric:t,isCls:!0})}\n\n\n\n  Experimental metrics\n  LCP (Chromium)                 = ${this.prettyMetric({metric:c})}\n  Interaction Duration           = ${this.prettyMetric({metric:n,isScH:!0})}\n  Interaction Hangs              = ${this.prettyMetric({metric:a,isScH:!0})}\n  Additional Load Time           = ${this.prettyMetric({metric:e,isAlt:!0})}\n  Interaction to Next Paint      = ${this.prettyMetric({metric:o,isInp:!0})}}\n  Cumulative LoAF Blocking Time  = ${this.prettyMetric({metric:s})}\n  Long Animation Frames          = ${b}${O},\n  Rich Content Loading Time      = ${this.prettyMetric({metric:L})}\n  `,'font-weight: bold;','')},this.prettyMetric=({metric:e,isFid:t,isTbt:s,isCls:i,isAlt:o,isScH:n,isInp:a})=>{let c='';return c=i?(e||0).toFixed(2):e?`${Math.round(e).toLocaleString()} ms`:'...',c=c.padStart(9,' '),t&&void 0===e&&(c=`${c} (click to see)`),a&&void 0===e&&(c=`${c} (background tab to calculate)`),s&&void 0===e&&(c=`${c} (background tab to calculate)`),o&&void 0===e&&(c=`${c} (background tab to calculate)`),n&&void 0===e&&(c=`${c} (background tab to calculate)`),c},this.isDirectRequest=e,this.isClientSideRequest=!e,this.navigationType=(0,a.getNavigationType)(),e?this.createdAt=0:(this.performance.mark(F,{startTime:t}),this.createdAt=t||this.performance.now()),2!==this.initialVisibilityState?((0,f.getPageRequestMethod)(this.isClientSideRequest).then(e=>{this.pageRequestMethod=e}),this.isClientSideRequest?this.recorderResults.documentAge=0:s.default.get('pageGeneratedAt')&&(this.recorderResults.documentAge=Math.max(Date.now()-s.default.get('pageGeneratedAt'),0)),this.gatherMetrics(),this.hasNecessaryPolyfills()&&this.gatherPolyfilledMetrics()):this.isRecorderLoggable=!1}listenForRCLT(){this.rcltObserver=new PerformanceObserver(e=>{this.recorderResults.rcltEntries??=[],this.recorderResults.rcltEntries.push(...e.getEntries().filter(e=>'RCLT'===e.name).map(e=>({duration:e.duration,url:e.detail?.src})))}),this.rcltObserver.observe({type:'measure'})}cleanupRCLT(){this.rcltObserver?.disconnect(),performance.clearMeasures('RCLT')}listenForCustomMetricsEntries(){this.supportsPerformanceObserverWithType('element')&&this.customMetricMapping&&(this.customMetricObserver=new PerformanceObserver(this.customMetricObserverCallback.bind(this)),this.customMetricObserver.observe({type:'element',buffered:!0}))}customMetricObserverCallback(e){e.getEntries().forEach(e=>{const t=Object.values(this.customMetricMapping||{}),s=e,i=s.identifier;if(t.includes(i)){const e=(0,p.getDurationFromPerformanceElementEntry)({pageCreatedAt:this.createdAt,elementEntry:s});if(void 0===e)return;this.recorderResults.customMetrics[i]=e}})}cleanUpCustomMetricsObserver(){this.customMetricObserver?.disconnect()}measureCustomMetricsPerformanceMarks(){this.customMetricMapping&&Object.keys(this.customMetricMapping).forEach(e=>{const t=e,s=`${t}_start`,i=`${t}_end`,o=this.performance.getEntriesByName(s).length>=1;if(this.performance.getEntriesByName(i).length>=1){const e=o?this.performance.measure(t,s,i):this.performance.measure(t,{},i),n=(0,p.getDurationFromPerformanceMeasure)({performanceMeasure:e,pageCreatedAt:this.createdAt,isClientSideRequest:!this.isDirectRequest});if(void 0===n)return;this.recorderResults.customMetrics[t]=n}this.performance.clearMarks(s),this.performance.clearMarks(i),this.performance.clearMeasures(t)})}}_e.default=C,C.lastInputDelayEvent=void 0},"7fa87b",["45f788","ba7a76","ef2bc3","a081df","f9341a","e9b7bf","5d602b","364f02","cd9ddf","697349","8d30ca","44fd48","f226da","6f10f0","b91b4c","d72f90","5ba13b","1140d4","a8598b","ac5421"]);
__d(function(g,r,i,_a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.calculateAdditionalLoadTime=function(t,n){const a=u(o(t,n));if(0===a.length)return 0;const s=a.map(({start:t,end:n})=>n-t).reduce((t,n)=>t+n,0);return s/a.length},e.isALTEnabled=function(){return n.default.getBootstrap('pps_web_enable_alt')},e.measureAdditionalLoadTime=function(t,n){const a=o(t,n);u(a).forEach(({start:t,end:n})=>performance.measure('ALT',{start:t,end:n}))};var n=t(r(d[1]));const a=new Set(['fetch','xmlhttprequest','script','css','link']),s=new Set(['/tracking/jitney/logging/messages','/api/v2/marketing_event_tracking']);function o(t,n){return t.filter(t=>{if('number'!=typeof n||t.startTime<n)return!1;if(t.duration<50)return!1;if(!a.has(t.initiatorType))return!1;const{pathname:o}=new URL(t.name);return!s.has(o)})}function u(t){const n=t.sort((t,n)=>t.startTime-n.startTime),a=[];return n.forEach(({startTime:t,responseEnd:n})=>{const s=a[a.length-1];!s||t>s.end?a.push({start:t,end:n}):s.end=Math.max(s.end,n)}),a}},"8d30ca",["ba7a76","c235f8"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isRCLTSupported=function(){return'IntersectionObserver'in window&&'MockIntersectionObserver'!==IntersectionObserver.name};const t=new class{constructor(){this.useElementTiming=void 0,this.elementTimingObserver=null,this.intersectionObserver=null,this.timings=new WeakMap,this.observedElements=new WeakSet,this.elementTimingCallbacks=new WeakMap,this.useElementTiming=this.detectElementTimingSupport(),this.useElementTiming&&this.setupElementTimingObserver()}detectElementTimingSupport(){return'PerformanceObserver'in window&&PerformanceObserver.supportedEntryTypes?.includes('element')}setupElementTimingObserver(){this.elementTimingObserver=new PerformanceObserver(t=>{for(const n of t.getEntries())if('element'===n.entryType){const t=n,s=t.element;this.elementTimingCallbacks.get(s)?.(t),this.elementTimingCallbacks.delete(s)}}),this.elementTimingObserver.observe({type:'element',buffered:!0})}recordRCLT(t,n,s){window.performance.measure('RCLT',{start:n,end:s,detail:{src:t.src}}),this.timings.set(t,s-n)}observeViewportEntry(t){this.observedElements.has(t)||(this.observedElements.add(t),this.intersectionObserver||(this.intersectionObserver=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target,s=t.time;n.complete?this.recordRCLT(n,s,s):this.useElementTiming?this.elementTimingCallbacks.set(n,t=>{const o=t.renderTime<s?s:t.renderTime;this.recordRCLT(n,s,o)}):n.addEventListener('load',()=>{const t=performance.now();this.recordRCLT(n,s,t)}),this.intersectionObserver.unobserve(t.target)}})},{threshold:.1})),this.intersectionObserver.observe(t))}observe(t){this.observeViewportEntry(t)}};e.default=t},"a8598b",[]);
__d(function(g,r,i,_a,m,e,d){"use strict";function t(t,n){const{longTasks:c}=t,{start:u,end:o}=n;return c.filter(t=>t.startTime>=u&&(!o||t.startTime<o)).sort((t,n)=>t.startTime-n.startTime).map((t,n)=>({entry:t,index:n}))}function n(t){return t.reduce((t,n)=>t+n.entry.duration-50,0)}function c(c,u){return n(t(c,u))}function u(t){if(0!==t.length)return t.reduce((t,n)=>n.entry.duration>t.entry.duration?n:t,t[0])}function o(n){const{ttfcp:c=0}=n;return u(t(n,{start:c}))}function a(t){if(t)return t.entry.duration-50}Object.defineProperty(e,"__esModule",{value:!0}),e.calculateInteractivityMetricsInInterval=function(c,o){const s=t(c,o);return{longTaskDurations:s.map(t=>t.entry.duration),totalBlockingTime:n(s),numberOfBlockingTasks:s.length,longestBlockingTime:a(u(s))}},e.calculateLongestBlockingTaskIndex=function(t){return o(t)?.index},e.calculateLongestBlockingTime=function(t){return a(o(t))},e.calculateNumberOfBlockingTasks=function(t){return t.longTasks.length},e.calculateTbtPostHydrate=function(t,n){const{ttfcp:u=0}=t;if(void 0===n)return;return c(t,{start:Math.max(n,u)})},e.calculateTbtPreHydrate=function(t,n){const{ttfcp:u=0}=t;if(void 0===n)return;return c(t,{start:u,end:n})},e.calculateTotalBlockingTime=function(t){const{ttfcp:n=0}=t;return c(t,{start:n})}},"ac5421",[]);
__d(function(g,r,i,_a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutShfitDebugEntry=function(o){const u=o.sources??[],h=u.filter(t=>Boolean(t.node)),s=h[h.length-1];return{value:o.value||0,startTime:Math.round(o.startTime),totalSources:u.length,sourceSample:{node:(0,t.serializeNode)(s?.node),shift:n(s?.currentRect,s?.previousRect)}}};var t=r(d[0]);function n(t,n){if(!t||!n)return{};const o=t.x-n.x,u=t.y-n.y,h=t.width-n.width,s=t.height-n.height;return{...0===o?{}:{x:o},...0===u?{}:{y:u},...0===h?{}:{width:h},...0===s?{}:{height:s}}}},"b91b4c",["6614c9"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.createJitneyPropsForImageResource=function({duration:t,encodedBodySize:n,name:c,transferSize:u}){if(!t||t<=0)return;if(!n||n<=0)return;const s=(0,o.getImageResourceType)(c);if('Unknown'===s)return;const f='ImageManager'===s?(0,o.getImageWidthPolicy)(c):(0,o.getLegacyAkamaiBucket)(c);return{image_cache_type:0===u?1:0,image_size_bytes:n,image_download_time_ms:Math.floor(t),image_policy:f,image_url:c}},e.sendJitneyEventsForImages=function(t){t.forEach(t=>{c.default.logJitneyEvent({schema:n().PerformanceImageDownloadEvent,event_data:t})})};var o=r(d[2]),c=t(r(d[3]))},"be6c80",["ba7a76","1d88d8","b19571","c8b97a"]);
__d(function(g,r,i,_a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.InteractivitySpanName=void 0,e.aggregateInteractivitySpans=function(t){const n=new Map;t.forEach(t=>{const{name:a}=t;n.has(a)||n.set(a,[]),n.get(a)?.push(t)});const a={};return n.forEach((t,n)=>{const s=t.reduce((t,n)=>t+n.duration,0),c=t.reduce((t,n)=>t+n.totalBlockingTime,0),T=t.reduce((t,n)=>t+n.numberOfBlockingTasks,0),o=t.flatMap(t=>t.longTaskDurations),E=16.666666666666668,u=o.map(t=>(t-E)/E).reduce((t,n)=>t+n,0);0!==s&&(a[n]={totalBlockingTimePerSecond:c/s*1e3,numberOfBlockingTasksPerSecond:T/s*1e3,minFrameDropsPerSecond:u/s*1e3,duration:s,count:t.length})}),a},e.beginInteractivitySpan=function(t){T(t,'BEGIN')},e.endInteractivitySpan=function(t){T(t,'END')},e.getInteractivitySpans=function(t){const c=(0,n.default)(),T=Object.values(a).reduce((t,n)=>[...t,...c.getEntriesByName(s(n,'BEGIN'),'mark'),...c.getEntriesByName(s(n,'END'),'mark')],[]).filter(n=>n.startTime>=t.start&&n.startTime<t.end);return T.sort((t,n)=>t.startTime-n.startTime),o(T,t)};var n=t(r(d[1]));const a=e.InteractivitySpanName={DESKTOP_MAP_INTERACTION:'DESKTOP_MAP_INTERACTION',MOWEB_MAP_INTERACTION:'MOWEB_MAP_INTERACTION',MOWEB_MAP_USER_INTERACTION:'MOWEB_MAP_USER_INTERACTION',DESKTOP_MAP_USER_INTERACTION:'DESKTOP_MAP_USER_INTERACTION',COMMUNITY_COMMITMENT_ACCEPT_TOS:'COMMUNITY_COMMITMENT_ACCEPT_TOS',SCROLL:'SCROLL'};function s(t,n){return`PPS_SPAN_${t}_${n}`}function c(t){const n=t.endsWith('_END')?'END':'BEGIN';return{name:t.slice(9,-(n.length+1)),event:n}}function T(t,a){(0,n.default)().mark(s(t,a))}function o(t,n){const a=new Set,s=new Map,T=[];return t.forEach(t=>{const{name:o,event:E}=c(t.name);'BEGIN'===E?s.has(o)||s.set(o,t.startTime):(s.has(o)?T.push({name:o,start:s.get(o),end:t.startTime}):a.has(o)||T.push({name:o,start:n.start,end:t.startTime}),s.delete(o),a.add(o))}),s.forEach((t,a)=>{T.push({name:a,start:t,end:n.end})}),T}},"cd9ddf",["ba7a76","5d602b"]);
__d(function(g,r,i,_a,m,e,d){"use strict";function t(t){return t&&0!==t.length?t.reduce((t,n)=>t+n.blockingDuration,0):0}Object.defineProperty(e,"__esModule",{value:!0}),e.analyzeScriptSources=function(t){try{const n=t.flatMap(t=>t.scripts),o=new Set(n.map(t=>t.sourceURL||'unknown')),a=Array.from(o);return a.map(t=>{const o=n.filter(n=>n.sourceURL===t);return{sourceURL:t,count:o.length,totalDuration:o.reduce((t,n)=>t+n.duration,0)}}).sort((t,n)=>n.totalDuration-t.totalDuration)}catch(t){return[]}},e.isLoafSupported=function(){return'undefined'!=typeof PerformanceObserver&&(!!PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes('long-animation-frame'))},e.limitFrames=function(t,n=100){const o=t.sort((t,n)=>n.blockingDuration-t.blockingDuration).filter(t=>t.blockingDuration>0);return o.length<=n?o:[...o].slice(0,n)},e.processLongAnimationFramesForDiagnostics=function(n){if(!n||0===n.length)return{frames:[],totalBlockingDuration:0,totalFrameDuration:0,longFrameCount:0,worstFrameBlockingTime:0,worstFrameDuration:0,cumulativeBlockingTime:0};let o=0,a=0,u=0,c=0;n.forEach(t=>{o+=t.blockingDuration,a+=t.duration,t.blockingDuration>u&&(u=t.blockingDuration),t.duration>c&&(c=t.duration)});const l=t(n);return{frames:n,totalBlockingDuration:o,totalFrameDuration:a,longFrameCount:n.length,worstFrameBlockingTime:u,worstFrameDuration:c,cumulativeBlockingTime:l}}},"d72f90",[]);
__d(function(g,r,i,_a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInpContainingElement=function(n){const t=n.map(n=>{const t=n.target?.parentElement?.closest('[data-pageslot]');return t?{duration:n.duration,name:t.pageSlotName??'unknown'}:{duration:n.duration,name:'unknown'}});return t.reduce((n,t)=>n.duration>t.duration?n:t,{duration:0,name:'unknown'}).name}},"f226da",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getTreatmentOverride=function(t,o){const u=s[t];if(void 0!==u)return u;const l=c(t,o??(0,n.default)());void 0!==l&&(s[t]=l);return l};var n=t(r(d[1]));const o=['1','true','','treatment'],u=['0','false','control'];function c(t,n){const c=n[t];if(null!==c)return!!o.includes(c)||!u.includes(c)&&void 0}const s={}},"f9341a",["ba7a76","a7c4ef"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/78bf.32422e842e.js.map