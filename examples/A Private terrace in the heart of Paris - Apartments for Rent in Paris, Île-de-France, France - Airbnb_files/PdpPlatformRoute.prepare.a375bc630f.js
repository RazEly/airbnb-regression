__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.injectMainQueryProps=e.default=void 0;var n=t(r(d[1])),s=r(d[2]),o=r(d[3]),u=t(r(d[4])),c=t(r(d[5])),l=r(d[6]);function p(){const t=r(d[7]);return p=function(){return t},t}var P=t(r(d[8])),f=t(r(d[9])),h=r(d[10]);const I=(t,n,s,{location:o,match:u})=>{if(!n)return!1;const{id:c}=u.params;return o.pathname.split(c)[0]===s?.pathname.split(c)[0]},y=e.injectMainQueryProps=(0,p().injectPreloadedQueryPropsWithDependencies)({query:u.default,getVariables:({location:t,match:s},o,u)=>{const{source_impression_id:c}=(0,P.default)(t.search),p=u.getAirParamField((0,n.default)('hotels/enable_entity_queries')),f=c||o;return(0,l.getRequestVariables)({location:t,match:s,p3ImpressionId:f,includeHotelFragments:p,flagger:u})},getIsDeferrableQuery:(t,n,s,o)=>o,getHeaders:({location:t},n,s,o,u,c)=>{const{invite:l}=(0,P.default)(t.search);return{'X-Airbnb-Client-Action-ID':c,...l&&{'X-Airbnb-Principal-Token':l}}},makeProps:(t,{match:n,location:s},o,u,c,l,p)=>{const{id:f}=n.params,{source_impression_id:h}=(0,P.default)(s.search);return{queryRef:t,showDeferredSkeleton:c,isElvisListing:l===f,p3ImpressionId:h||o,sessionId:p}},shouldUsePreviousPrepareProps:I,getEnableAppSessionInstrumentation:()=>!0,consumerId:'InjectPdpPlatformMainQueryProps'},[h.P3ImpressionIdToken,s.FlaggerToken,h.LaunchPdpUncachingToken,h.IconsSitarCheckToken,h.SessionIdToken]),k=(0,p().injectPreloadedQueryPropsWithDependencies)({query:f.default,getVariables:({match:t})=>({id:(0,o.createGlobalId)('DemandStayListing',t.params.id),fetchImages:!1}),getSkip:(t,n)=>!n,makeProps:t=>({skeletonQueryRef:t}),shouldUsePreviousPrepareProps:I,consumerId:'InjectPdpPlatformSkeletonQueryProps'},[h.LaunchPdpUncachingToken]),b=(0,p().injectPreloadedQueryProps)({query:c.default,getVariables:({match:t})=>{const{id:n}=t.params;return{id:(0,o.createGlobalId)('DemandStayListing',n??'')}},getSkip:()=>!0,makeProps:t=>({seoStructuredDataQueryRef:t}),shouldUsePreviousPrepareProps:I,consumerId:'InjectPdpPlatformSeoQueryProps'});e.default=t=>{y(t),k(t),b(t)}},"1d2725",["ba7a76","84ad93","ab7b9c","56afe0","7096f2","8405e2","99b905","2374e4","a7c4ef","27f4f9","667f26"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:'PdpEarlyFlushMetadataV2Query',type:'query',operationId:'6d5d03fe66eba083d1eba3f668eef4eab5375087e162f826cd22d5bea6bb75fb'}},"27f4f9",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){const{amenities:n}=(0,u.default)(t.search);if(null==n||!Array.isArray(n))return null;return n.filter(t=>t).map(t=>Number(t))};var u=t(r(d[1]))},"35872a",["ba7a76","a7c4ef"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getTranslateUgcParam=function(t){return s(t.search)},e.setTranslateUgcParam=function(t){if(!g.window)return;if('function'!=typeof g.window.history.replaceState)return;if('UNDEFINED'===t)return;const s=(0,u.default)(),f='UNTRANSLATED'===t,h=(0,o.default)({...s,translate_ugc:String(f)},n.default),{hash:p,pathname:w,search:_}=window.location,y=(0,l.default)({params:h,pathname:w,search:_})+p;(0,c.getHistory)().replace(y)};var n=t(r(d[1])),u=t(r(d[2])),c=r(d[3]),l=t(r(d[4])),o=t(r(d[5]));function s(t){const{translate_ugc:n}=(0,u.default)(t);return n?'true'===n:null}},"5dafcf",["ba7a76","88e3c5","a7c4ef","7934b6","99d1d8","c97d21"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SessionIdToken=e.P3ImpressionIdToken=e.LaunchPdpUncachingToken=e.IconsSitarCheckToken=void 0;var n=r(d[0]);e.LaunchPdpUncachingToken=(0,n.createToken)('LaunchPdpUncachingToken',{getDefault:()=>!1,hydrate:!0}),e.P3ImpressionIdToken=(0,n.createToken)('P3ImpressionIdToken',{getDefault:()=>'',hydrate:!0}),e.IconsSitarCheckToken=(0,n.createToken)('IconsSitarCheckToken',{getDefault:()=>{},hydrate:!0}),e.SessionIdToken=(0,n.createToken)('SessionIdToken',{getDefault:()=>'',hydrate:!0})},"667f26",["cd87be"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:'StaysPdpSections',type:'query',operationId:'84d53d6027a677ac10a1a56f67e817ae697312f84b0e364e87b448540bc96d1b'}},"7096f2",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:'StaysPDPSeoStructuredDataQuery',type:'query',operationId:'9f8789c23c55088b213ed0d270c814ee2acf15b4ee1c1ebd2a759aeab6f4205f'}},"8405e2",[]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({id:t,queryParams:o}){const{confirmation_code:s,split_stays_uuid:n}=o;return{splitStaysId:n,stays:[{productId:t,confirmationCode:s}]}}},"874bf3",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return c(t.search)};var u=t(r(d[1]));function c(t){const{pdp_type_override:c,tier_override:n}=(0,u.default)(t);if(n&&'0'===n)return'MARKETPLACE';switch(c){case'HOTEL':case'hotel':return'HOTEL';case'LUXE':case'luxe':return'LUXE';case'MARKETPLACE':case'marketplace':return'MARKETPLACE';default:return}}},"8ceb28",["ba7a76","a7c4ef"]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getRequestVariables=function({forSplitStays:t=!1,location:_,match:I,p3ImpressionId:y,includeHotelFragments:h,flagger:f}){const S=(0,n.createGlobalId)('StayListing',I.params.id),k=(0,n.createGlobalId)('DemandStayListing',I.params.id),b=(0,o.default)(_.search),{adults:v,bypass_targetings:N,cancellation_policy_id:P,category_tag:T,cause_id:w,check_in:O,check_out:B,children:F,disaster_id:G,discountedGuestFeeVersion:L=null,federatedSearchId:M=null,federated_search_id:U=null,force_boost_unc_priority_message_type:V,guests:A,host_preview:C,infants:D,interactionType:E=null,mockId:R,omni_page_id:q,omni_version_id:x,original_check_in:H,original_check_out:W,pets:j,photoId:z=null,photo_id:J=null,preview:K,priceDropSource:Q,private_booking:X,promotionUuid:Y,rate_plan_id:Z,relaxed_amenity_ids:$,searchId:ee=null,staysBookingMigrationEnabled:te=null,useNewSectionWrapperApi:ne=null}=b,ie={adults:v||A||'1',amenityFilters:(0,s.default)(_),bypassTargetings:'true'===N,categoryTag:T||null,causeId:w||null,children:F||null,disasterId:G||null,discountedGuestFeeVersion:Number(L)||null,federatedSearchId:M||U,forceBoostPriorityMessageType:V||null,hostPreview:'true'===C,infants:D||null,interactionType:E,layouts:['SIDEBAR','SINGLE_COLUMN'],omniPageId:q,omniVersionId:x,pets:Number(j)||0,pdpTypeOverride:(0,u.default)(_)||null,photoId:z||J,preview:'true'===K,previousStateCheckIn:H||null,previousStateCheckOut:W||null,priceDropSource:Q||null,privateBooking:'true'===X,promotionUuid:Y||null,relaxedAmenityIds:$||null,searchId:ee,selectedCancellationPolicyId:Number(P)||null,selectedRatePlanId:Number(Z)||null,splitStays:t?(0,c.default)({id:S,queryParams:b}):null,staysBookingMigrationEnabled:'true'===te,translateUgc:(0,l.getTranslateUgcParam)(_),useNewSectionWrapperApi:'true'===ne,sectionIds:null,checkIn:null,checkOut:null,p3ImpressionId:y};O&&B&&(ie.checkIn=O,ie.checkOut=B);return{id:S,demandStayListingId:k,pdpSectionsRequest:ie,includeHotelFragments:!!h,...(0,p.getSectionIncludeVariables)(f),...R&&{mockIdentifier:R}}};var n=r(d[1]),l=r(d[2]),o=t(r(d[3])),s=t(r(d[4])),u=t(r(d[5])),c=t(r(d[6])),p=r(d[7])},"99b905",["ba7a76","56afe0","5dafcf","a7c4ef","35872a","8ceb28","874bf3","cf0bd6"]);
__d(function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,u){return Object.entries(t).reduce((t,[n,c])=>(u(c,n)&&(t[n]=c),t),{})}},"c97d21",[]);
__d(function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.SectionDataSourceMode=e.GP_ONLY_SECTION_INCLUDE_VARIABLES=void 0,e.getSectionIncludeVariables=f,e.useSectionDataSourceMode=function(t){if(!o(t))return s.GP_ONLY;const{useEntityAirparam:n,diffAirparam:u}=p[t],l=!!_.default.getAirParamField(n),c=!!_.default.getAirParamField(u);return l?s.ENTITY_ONLY:c?s.GP_AND_ENTITY:s.GP_ONLY};var n=t(r(d[1])),_=t(r(d[2]));const p={DESCRIPTION_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_description_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_description_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationDescriptionFragment',gpVar:'includeGpDescriptionFragment'},HIGHLIGHTS_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_highlights_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_highlights_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationHighlightsFragment',gpVar:'includeGpHighlightsFragment'},NAV_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_nav_default_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_nav_default_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationNavFragment',gpVar:'includeGpNavFragment'},NAV_MOBILE:{useEntityAirparam:(0,n.default)('pdp_stays_navigation_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_navigation_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationNavMobileFragment',gpVar:'includeGpNavMobileFragment'},NAV_MOBILE_IMMERSIVE:{useEntityAirparam:(0,n.default)('pdp_stays_navigation_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_navigation_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationNavMobileFragment',gpVar:'includeGpNavMobileFragment'},PDP_DESCRIPTION_MODAL:{useEntityAirparam:(0,n.default)('pdp_stays_description_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_description_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationDescriptionFragment',gpVar:'includeGpDescriptionFragment'},REPORT_TO_AIRBNB:{useEntityAirparam:(0,n.default)('pdp_stays_report_listing_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_report_listing_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationReportToAirbnbFragment',gpVar:'includeGpReportToAirbnbFragment'},REVIEWS_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_reviews_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_reviews_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationReviewsFragment',gpVar:'includeGpReviewsFragment'},REVIEWS_EMPTY_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_empty_reviews_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_empty_reviews_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationReviewsEmptyFragment',gpVar:'includeGpReviewsEmptyFragment'},TITLE_DEFAULT:{useEntityAirparam:(0,n.default)('pdp_stays_title_section_migration/use_entity_view_model'),diffAirparam:(0,n.default)('pdp_stays_title_section_migration/diff_view_models'),pdpMigrationVar:'includePdpMigrationTitleFragment',gpVar:'includeGpTitleFragment'}};function o(t){return null!=t&&t in p}const s=e.SectionDataSourceMode={GP_ONLY:'gp_only',GP_AND_ENTITY:'gp_and_entity',ENTITY_ONLY:'entity_only'};function u(t,n){const{useEntityAirparam:_,diffAirparam:o}=p[n],u=t.getAirParamField(_),l=t.getAirParamField(o);return u?s.ENTITY_ONLY:l?s.GP_AND_ENTITY:s.GP_ONLY}function l(t=s.GP_ONLY){switch(t){case s.ENTITY_ONLY:return{includePdpMigration:!0,includeGp:!1};case s.GP_AND_ENTITY:return{includePdpMigration:!0,includeGp:!0};case s.GP_ONLY:default:return{includePdpMigration:!1,includeGp:!0}}}function c(t){const n=Object.keys(p),_=n=>l(t&&u(t,n));return n.reduce((t,n)=>({...t,[n]:_(n)}),{})}function f(t){const n=c(t);return Object.keys(p).reduce((t,_)=>{const o=p[_],s={...t};return'pdpMigrationVar'in o&&(s[o.pdpMigrationVar]=n[_].includePdpMigration),'gpVar'in o&&(s[o.gpVar]=n[_].includeGp),s},{})}e.GP_ONLY_SECTION_INCLUDE_VARIABLES=f()},"cf0bd6",["ba7a76","84ad93","dcc72a"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/gp-stays-pdp-route/routes/PdpPlatformRoute.prepare.1237864ed7.js.map